{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">
        {% if language == 'ar' %}
            Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨
        {% else %}
            Checkout
        {% endif %}
    </h2>

    <form method="post" class="mb-4">
        {% csrf_token %}
        
        <!-- Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø§Ù„Ø¯ÙØ¹ -->
        <div class="form-group">
            <label for="payment_method">ğŸ’³ {% if language == 'ar' %}Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹{% else %}Payment Method{% endif %}</label>
            <select id="payment_method" name="payment_method" class="form-control" required>
                {% for method in payment_methods %}
                    <option value="{{ method.name }}">{{ method.name }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø§Ù„Ø´Ø­Ù† -->
        <div class="form-group mt-3">
            <label for="shipping_method">ğŸšš {% if language == 'ar' %}Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø´Ø­Ù†{% else %}Shipping Method{% endif %}</label>
            <select id="shipping_method" name="shipping_method" class="form-control" required>
                {% for method in shipping_methods %}
                    <option value="{{ method.id }}">
                        {{ method.name }} - {{ method.price }} Ø¯Ø¬
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ -->
        <div class="form-group mt-3">
            {{ form.as_p }}
        </div>

        <div class="form-group mt-4">
            <h4 class="text-right">
                {% if language == 'ar' %}
                    Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:
                {% else %}
                    Total:
                {% endif %}
                <strong>{{ total_amount }} Ø¯Ø¬</strong>
            </h4>
        </div>
        
        <button type="submit" class="btn btn-success w-100">
            {% if language == 'ar' %}
                Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨
            {% else %}
                Complete Order
            {% endif %}
        </button>
    </form>

    <hr>

    <h3 class="text-center mb-4">
        {% if language == 'ar' %}
            Ø£Ùˆ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ ÙƒØ²Ø§Ø¦Ø±
        {% else %}
            Or you can checkout as a guest
        {% endif %}
    </h3>
    <form action="{% url 'create_guest_order' %}" method="post" class="mb-4">
        {% csrf_token %}
        <button type="submit" class="btn btn-secondary w-100">
            {% if language == 'ar' %}
                Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ ÙƒØ²Ø§Ø¦Ø±
            {% else %}
                Checkout as Guest
            {% endif %}
        </button>
    </form>

    <hr>

    <div class="text-center">
        <a href="{% url 'view_cart' %}" class="btn btn-outline-primary">
            {% if language == 'ar' %}
                Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚
            {% else %}
                Go to Cart
            {% endif %}
        </a>
    </div>
</div>
{% endblock %}